### 실행 컨텍스트(Execution Context)

- **실행 컨텍스트(Execution Context)**는 실행할 코드에 제공할 환경을 모아놓은 객체로, 자바스크립트의 동적 언어로서의 성격을 파악할 수 있는 개념입니다.
- 자바스크립트는 어떤 실행 컨텍스트가 활성화되는 시점에 선언된 변수를 위로 끌어올리고(Hoisting), 외부 환경 정보를 구성하고 `this`값을 설정하는 동작을 수행합니다.
- 실행 컨텍스트는 자바스크립트에서 가장 중요한 핵심 개념 중 하나입니다. 자바스크립트 뿐만 아니라 클로저를 지원하는 대부분의 언어에 이와 유사하거나 동일한 개념이 적용되어 있습니다.

```javascript
//------------------------ (1)
var a = 1;

function outer() {
  function inner() {
    console.log(a);
    var a = 3;
  }
  inner(); // ------------- (2)
  console.log(a);
}

outer(); // -------------- (3)
console.log(a);
```

- 위와 같은 코드를 실행하게 되면 (1) 전역 컨텍스트가 콜 스택에 담깁니다. 전역 컨택스트는 일반적인 실행 컨텍스트와 다를 것이 없습니다. 최상단의 공간은 코드 내부에 별도의 실행 명령이 없더라도 브라우저에서 자동으로 실행하게 됩니다. 즉, 자바스크립트 파일이 실행되는 순간 전역 컨텍스트가 활성화 되어 콜 스택에 들어갑니다.
- 이후 코드가 순차적으로 진행되어 (3)에 있는 `outer()`함수가 콜 스택에 담깁니다. 콜 스택에 `outer()`가 들어오게 되면 기존에 담겨있던 전역 컨텍스트가 잠시 맘추고 `outer()`함수를 실행합니다.
- `outer()`함수가 실행되는 중 (2)에 있는 `inner()`함수가 콜 스택에 들어가게 됩니다. 스택의 맨 위에 `inner()`함수가 존재하게 되므로 `outer()`함수가 멈추고 `inner()`함수가 먼저 실행됩니다.
- 이후 `inner()`함수가 종료되면서 `inner()`실행 컨텍스트가 콜 스택에서 제거 되고 순차적으로 `outer()` -> 전역 컨텍스트가 실행됩니다.

### 실행 컨텍스트와 콜 스택

- 스택구조에 따라 실행 컨텍스트가 콜 스택의 맨 위에 쌓이는 순간이 곧 현재 실행할 코드여 관여하게 되는 시점입니다. 이렇게 어떤 실행 컨텍스트가 활성화 될 때 자바스크립트 엔진은 해당 컨텍스트에 관련된 코드를 실행하는데 필요한 환경정보들을 수집해서 실행 컨테스트 객체에 저장합니다.
- 이 객체는 자바스크립트 엔진이 활용할 목적으로 생성될 뿐 개발자가 코드를 통해 확인할 수는 없습니다.
- 이 때 객체에 담기는 정보들을 다음과 같습니다.
  - **VariableEnvironment** : 현재 컨텍스트 내의 식별자들에 대한 정보 + 외부 환경 정보, LexicalEnvironment의 스냅샷
  - **LexicalEnvironment** : 처음에는 VariableEnvironment와 같지만 변경 사항이 실시간으로 반영됨.
  - **ThisBinding** : `this`식별자가 바라봐야 할 대상 객체

---

- 공부하면서 알게 된 내용을 정리한 글입니다.
- 궁금한 점이 있으시거나 잘못된 내용이 있다면 댓글로 알려주시면 감사하겠습니다.
